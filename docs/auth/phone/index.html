<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.56">
<title data-react-helmet="true">Phone Authentication | FlutterFire</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Phone Authentication | FlutterFire"><meta data-react-helmet="true" name="description" content="This documentation is a work in progress."><meta data-react-helmet="true" property="og:description" content="This documentation is a work in progress."><meta data-react-helmet="true" property="og:url" content="https://firebase.flutter.dev/docs/auth/phone"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://firebase.flutter.dev/docs/auth/phone"><link rel="stylesheet" href="/styles.79e208e8.css">
<link rel="stylesheet" href="/main.4ce985a5.css">
<link rel="stylesheet" href="/1be78505.7cbeb736.css">
<link rel="preload" href="/styles.778a50fb.js" as="script">
<link rel="preload" href="/runtime~main.dc3a727e.js" as="script">
<link rel="preload" href="/main.3fbd56e7.js" as="script">
<link rel="preload" href="/1.36ee5a7c.js" as="script">
<link rel="preload" href="/2.f8c70d36.js" as="script">
<link rel="preload" href="/1be78505.6a0a098a.js" as="script">
<link rel="preload" href="/35.a758d756.js" as="script">
<link rel="preload" href="/36.4753b087.js" as="script">
<link rel="preload" href="/20ac7829.a4ae5eaf.js" as="script">
<link rel="preload" href="/4497ea0b.4b6af218.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):e.matches&&t("dark")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><strong class="navbar__title">FlutterFire</strong></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/firebaseextended/flutterfire" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><strong class="navbar__title">FlutterFire</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a href="https://github.com/firebaseextended/flutterfire" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp"><div class="sidebar_1kLs"><div class="menu menu--responsive menu_w2sC"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/installation/android">Android Installation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/installation/ios">iOS Installation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/installation/web">Web Installation</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Authentication</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/auth/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/auth/usage">Usage</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/auth/social">Social Auth</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/auth/phone">Phone Auth</a></li><li class="menu__list-item"><a href="https://pub.dev/documentation/firebase_auth/latest/" target="_blank" rel="noreferrer noopener" class="menu__link" to="https://pub.dev/documentation/firebase_auth/latest/" tabindex="0">Reference API</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Cloud Firestore</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/firestore/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/firestore/usage">Usage</a></li><li class="menu__list-item"><a href="https://pub.dev/documentation/cloud_firestore/latest/" target="_blank" rel="noreferrer noopener" class="menu__link" to="https://pub.dev/documentation/cloud_firestore/latest/" tabindex="-1">Reference API</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Core</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/core/usage">Usage</a></li><li class="menu__list-item"><a href="https://pub.dev/documentation/firebase_core/latest/" target="_blank" rel="noreferrer noopener" class="menu__link" to="https://pub.dev/documentation/firebase_core/latest/" tabindex="-1">Reference API</a></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div class="container padding-vert--lg docItemWrapper_1cc7"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">Phone Authentication</h1></header><div class="markdown"><blockquote class="blockquote_3DgE"><p>This documentation is a work in progress.</p></blockquote><p>Phone authentication allows users to sign in to Firebase using their phone as the authenticator.  An SMS message is sent
to the user via their phone number containing a unique code. Once the code has been authorized, the user is able to sign
into Firebase.</p><p>Phone numbers that end users provide for authentication will be sent and stored by Google to improve spam and abuse
prevention across Google service, including to, but not limited to Firebase. Developers should ensure they have the
appropriate end-user conset prior to using the Firebase Authentication phone number sign-in service.authentication</p><blockquote class="blockquote_3DgE"><p>Firebase Phone Authentication is not supported in all countries. Please see their <a href="https://firebase.google.com/support/faq/#develop" target="_blank" rel="noopener noreferrer">FAQs</a> for more information</p></blockquote><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="android"></a>Android<a aria-hidden="true" tabindex="-1" class="hash-link" href="#android" title="Direct link to heading">#</a></h2><ol><li><p>Enable Phone as a Sign-In method in the <a href="https://console.firebase.google.com/u/0/project/_/authentication/providers" target="_blank" rel="noopener noreferrer">Firebase console</a></p><blockquote class="blockquote_3DgE"><p><strong>Note:</strong>  When testing you can add test phone numbers and verification codes to the Firebase console.</p></blockquote></li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="ios"></a>iOS<a aria-hidden="true" tabindex="-1" class="hash-link" href="#ios" title="Direct link to heading">#</a></h2><ol><li><p>Enable Phone as a Sign-In method in the <a href="https://console.firebase.google.com/u/0/project/_/authentication/providers" target="_blank" rel="noopener noreferrer">Firebase console</a></p></li><li><p><a href="https://firebase.google.com/docs/auth/ios/phone-auth#enable-app-verification" target="_blank" rel="noopener noreferrer">Enable App verification</a></p><blockquote class="blockquote_3DgE"><p><strong>Note:</strong>  App verification may use APNs, if using a simulator (where APNs does not work) or APNs is not setup on the device you are using you must set the URL Schemes to the REVERSE_CLIENT_ID from the GoogleServices-Info.plist file.</p></blockquote></li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="usage"></a>Usage<a aria-hidden="true" tabindex="-1" class="hash-link" href="#usage" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="sign-in"></a>Sign In<a aria-hidden="true" tabindex="-1" class="hash-link" href="#sign-in" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_x_oC"><div style="color:#bfc7d5;background-color:#292d3e" class="codeBlockTitle_U1PS">NEEDS UPDATING/VALIDATING</div><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj undefined">Copy</button><div tabindex="0" class="prism-code language-dart codeBlock_19pQ codeBlockWithTitle_2fj3"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  void _verifyPhoneNumber() async {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    setState(() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      _message = &#x27;&#x27;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    });</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    final PhoneVerificationCompleted verificationCompleted =</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        (AuthCredential phoneAuthCredential) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      _auth.signInWithCredential(phoneAuthCredential);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      setState(() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        _message = &#x27;Received phone auth credential: $phoneAuthCredential&#x27;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      });</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    };</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    final PhoneVerificationFailed verificationFailed =</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        (AuthException authException) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      setState(() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        _message =</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &#x27;Phone number verification failed. Code: ${authException.code}. Message: ${authException.message}&#x27;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      });</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    };</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    final PhoneCodeSent codeSent =</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        (String verificationId, [int forceResendingToken]) async {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      widget._scaffold.showSnackBar(const SnackBar(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        content: Text(&#x27;Please check your phone for the verification code.&#x27;),</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      ));</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      _verificationId = verificationId;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    };</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    final PhoneCodeAutoRetrievalTimeout codeAutoRetrievalTimeout =</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        (String verificationId) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      _verificationId = verificationId;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    };</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    await _auth.verifyPhoneNumber(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        phoneNumber: _phoneNumberController.text,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        timeout: const Duration(seconds: 5),</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        verificationCompleted: verificationCompleted,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        verificationFailed: verificationFailed,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        codeSent: codeSent,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        codeAutoRetrievalTimeout: codeAutoRetrievalTimeout);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  // Example code of how to sign in with phone.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  void _signInWithPhoneNumber() async {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    final AuthCredential credential = PhoneAuthProvider.getCredential(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      verificationId: _verificationId,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      smsCode: _smsController.text,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    );</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    final FirebaseUser user =</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        (await _auth.signInWithCredential(credential)).user;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    final FirebaseUser currentUser = await _auth.currentUser();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    assert(user.uid == currentUser.uid);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    setState(() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      if (user != null) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        _message = &#x27;Successfully signed in, uid: &#x27; + user.uid;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      } else {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        _message = &#x27;Sign in failed&#x27;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    });</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="testing"></a>Testing<a aria-hidden="true" tabindex="-1" class="hash-link" href="#testing" title="Direct link to heading">#</a></h3><p>Firebase provides support for locally testing phone numbers. For local testing to work, you must have ensured your local
machine SHA1 debug key was added whilst creating your application on the Firebase Console. View the Getting Started
guide on how to set this up.</p><p>On the Firebase Console, select the &quot;Phone&quot; authentication provider and click on the &quot;Phone numbers for testing&quot; dropdown.</p><p>Enter a new phone number (e.g. +44 7444 555666) and a test code (e.g. 123456).</p><p>Once added, the number can be used with the signInWithPhoneNumber method, and entering the code specified will
cause a successful sign-in.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/FirebaseExtended/flutterfire/edit/next/docs/../docs/auth/phone.mdx" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/auth/social"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Social Authentication</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/firestore/overview"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Cloud Firestore »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#android" class="table-of-contents__link">Android</a></li><li><a href="#ios" class="table-of-contents__link">iOS</a></li><li><a href="#usage" class="table-of-contents__link">Usage</a><ul><li><a href="#sign-in" class="table-of-contents__link">Sign In</a></li><li><a href="#testing" class="table-of-contents__link">Testing</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/">Coming soon</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/flutterfire" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="https://flutter.dev/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Flutter</a></li><li class="footer__item"><a href="https://pub.dev/" target="_blank" rel="noopener noreferrer" class="footer__link-item">pub.dev</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Social</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/FirebaseExtended/flutterfire" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="text--center"><div><div style="margin-top: 3rem"><small>Except as otherwise noted, this work is licensed under a Creative Commons Attribution 4.0 International License, and code samples are licensed under the BSD License.</small></div></div></div></div></footer></div>
<script src="/styles.778a50fb.js"></script>
<script src="/runtime~main.dc3a727e.js"></script>
<script src="/main.3fbd56e7.js"></script>
<script src="/1.36ee5a7c.js"></script>
<script src="/2.f8c70d36.js"></script>
<script src="/1be78505.6a0a098a.js"></script>
<script src="/35.a758d756.js"></script>
<script src="/36.4753b087.js"></script>
<script src="/20ac7829.a4ae5eaf.js"></script>
<script src="/4497ea0b.4b6af218.js"></script>
</body>
</html>