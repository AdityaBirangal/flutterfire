(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{105:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return p})),n.d(t,"metadata",(function(){return o})),n.d(t,"rightToc",(function(){return s})),n.d(t,"default",(function(){return l}));var a=n(1),r=n(6),i=(n(0),n(142)),p={title:"Core",sidebar_label:"Usage"},o={id:"core/usage",title:"Core",description:"The `firebase_core` plugin is responsible for connecting your Flutter app to your Firebase project. The plugin must be",source:"@site/../docs/core/usage.mdx",permalink:"/flutterfire/docs/core/usage",editUrl:"https://github.com/FirebaseExtended/flutterfire/edit/next/docs/../docs/core/usage.mdx",sidebar_label:"Usage",sidebar:"main",previous:{title:"Cloud Firestore",permalink:"/flutterfire/docs/firestore/usage"}},s=[{value:"Installation",id:"installation",children:[]},{value:"Default Firebase app",id:"default-firebase-app",children:[]},{value:"Secondary Firebase apps",id:"secondary-firebase-apps",children:[{value:"Initializing secondary apps",id:"initializing-secondary-apps",children:[]},{value:"Accessing secondary apps",id:"accessing-secondary-apps",children:[]},{value:"Using app instances",id:"using-app-instances",children:[]},{value:"Deleting instances",id:"deleting-instances",children:[]}]}],c={rightToc:s};function l(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(i.b)("wrapper",Object(a.a)({},c,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("p",null,"The ",Object(i.b)("inlineCode",{parentName:"p"},"firebase_core")," plugin is responsible for connecting your Flutter app to your Firebase project. The plugin must be\ninstalled and initialized before any usage with any other FlutterFire plugins. It provides basic functionality such\nas:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"overview#initializing-flutterfire"}),"Initializing FlutterFire"),"."),Object(i.b)("li",{parentName:"ul"},"Creating ",Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"usage#installation"}),"Secondary Firebase App Instances"),".")),Object(i.b)("h2",{id:"installation"},"Installation"),Object(i.b)("p",null,"The ",Object(i.b)("inlineCode",{parentName:"p"},"firebase_core")," plugin can be installed by following the ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"/flutterfire/docs/overview"}),"Getting Started")," documentation. Once installed,\nimport the plugin:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-dart"}),"import 'package:firebase_core/firebase_core.dart';\n")),Object(i.b)("h2",{id:"default-firebase-app"},"Default Firebase app"),Object(i.b)("p",null,"FlutterFire requires a default Firebase app to be present before initialization, otherwise an exception will be thrown.\nThe steps for setting up a default app for your platform can be found in the ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"/flutterfire/docs/overview"}),"Getting Started")," documentation."),Object(i.b)("p",null,"Some plugins such as Analytics & Performance Monitoring are only compatible with the default Firebase app, however\nplugins such as Authentication can take advantage of ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"usage#secondary-firebase-apps"}),"Secondary Firebase Apps"),",\nallowing you to multiple Firebase projects at once."),Object(i.b)("p",null,"To access the default app, call the ",Object(i.b)("inlineCode",{parentName:"p"},"initializeApp")," or ",Object(i.b)("inlineCode",{parentName:"p"},"app")," method on ",Object(i.b)("inlineCode",{parentName:"p"},"FirebaseCore"),":"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-dart"}),"FirebaseApp defaultApp = await FirebaseCore.instance.initializeApp();\n// or\nFirebaseApp defaultApp = await FirebaseCore.instance.app();\n")),Object(i.b)("h2",{id:"secondary-firebase-apps"},"Secondary Firebase apps"),Object(i.b)("p",null,"Some FlutterFire plugins allow usage of secondary Firebase apps, letting you interchange which project the\nplugin uses. Currently, the Firebase SDKs provide functionality for using secondary apps with the following services:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Authentication."),Object(i.b)("li",{parentName:"ul"},"Realtime Database."),Object(i.b)("li",{parentName:"ul"},"Cloud Firestore."),Object(i.b)("li",{parentName:"ul"},"Cloud Functions"),Object(i.b)("li",{parentName:"ul"},"Cloud Storage."),Object(i.b)("li",{parentName:"ul"},"Instance ID."),Object(i.b)("li",{parentName:"ul"},"ML Kit Natural Language."),Object(i.b)("li",{parentName:"ul"},"ML Kit Vision."),Object(i.b)("li",{parentName:"ul"},"Remote Config.")),Object(i.b)("h3",{id:"initializing-secondary-apps"},"Initializing secondary apps"),Object(i.b)("p",null,"To initialize a secondary app, call the ",Object(i.b)("inlineCode",{parentName:"p"},"initalizeApp")," method with a name and options:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-dart"}),"await FirebaseCore.instance.initializeApp(\n    name: 'SecondaryApp',\n    options: const FirebaseOptions(\n        appId: 'my_appId',\n        apiKey: 'my_apiKey',\n        messagingSenderId: 'my_messagingSenderId',\n        projectId: 'my_projectId'\n    )\n);\n")),Object(i.b)("p",null,"At a minimum, you must provide the ",Object(i.b)("inlineCode",{parentName:"p"},"appId"),", ",Object(i.b)("inlineCode",{parentName:"p"},"apiKey"),", ",Object(i.b)("inlineCode",{parentName:"p"},"messagingSenderId")," and ",Object(i.b)("inlineCode",{parentName:"p"},"projectId"),". Although the other options\nare not required, it is recommended you view the ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://pub.dev/documentation/firebase_core_platform_interface/latest/firebase_core_platform_interface/FirebaseOptions-class.html"}),Object(i.b)("inlineCode",{parentName:"a"},"FirebaseOptions")),"\nreference API for the full list of options available."),Object(i.b)("h3",{id:"accessing-secondary-apps"},"Accessing secondary apps"),Object(i.b)("p",null,"Once initialized, secondary apps can be accessed via the ",Object(i.b)("inlineCode",{parentName:"p"},"app")," method on ",Object(i.b)("inlineCode",{parentName:"p"},"FirebaseCore"),":"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-dart"}),"FirebaseApp secondaryApp = FirebaseCore.instance.app('SecondaryApp');\n")),Object(i.b)("p",null,"Attempting to access an app which does not exist will throw an exception."),Object(i.b)("p",null,"It is also possible to fetch all existing apps at once via the ",Object(i.b)("inlineCode",{parentName:"p"},"apps")," property on ",Object(i.b)("inlineCode",{parentName:"p"},"FirebaseCore"),":"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-dart"}),"List<FirebaseApp> apps = FirebaseCore.instance.apps;\n\napps.forEach((app) {\n  print('App name: ${app.name}');\n});\n")),Object(i.b)("h3",{id:"using-app-instances"},"Using app instances"),Object(i.b)("p",null,"Each FlutterFire plugin provides a streamlined approach for using the default app as well as secondary apps (if applicable).\nThe convenient way to use the default app is by accessing the ",Object(i.b)("inlineCode",{parentName:"p"},"instance")," variable on each plugin base class. For example\nif using Cloud Firestore:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-dart"}),"// Access Firestore using the default Firebase app:\nFirestore firestore = Firestore.instance;\n\nfirestore\n  .collection('users')\n  .snapshots()\n  .listen((QuerySnapshot snapshot) {\n     // Query snapshot of the users collection on the default Firebase app\n  });\n")),Object(i.b)("p",null,"If instead you'd like to use a secondary app, pass it to the ",Object(i.b)("inlineCode",{parentName:"p"},"instanceFor")," static method on each plugin base class. For\nexample if using Cloud Firestore:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-dart"}),"FirebaseApp secondaryApp = FirebaseCore.instance.app('SecondaryApp');\n\nFirestore firestore = Firestore.instanceFor(\n  app: secondaryApp\n);\n\nfirestore\n  .collection('users')\n  .snapshots()\n  .listen((QuerySnapshot snapshot) {\n     // Query snapshot of the users collection on the SecondaryApp\n  });\n")),Object(i.b)("h3",{id:"deleting-instances"},"Deleting instances"),Object(i.b)("p",null,"If you no longer need a secondary app, you can delete by calling the ",Object(i.b)("inlineCode",{parentName:"p"},"delete")," method on the ",Object(i.b)("inlineCode",{parentName:"p"},"FirebaseApp")," instance:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-dart"}),"await FirebaseCore.instance.app('SecondApp').delete();\n")),Object(i.b)("p",null,"Any plugin usage attempting to use a deleted app will throw an exception. The default app cannot be deleted and will\nthrow an exception if deleted."))}l.isMDXComponent=!0},142:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return f}));var a=n(0),r=n.n(a);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=r.a.createContext({}),l=function(e){var t=r.a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):o({},t,{},e)),n},b=function(e){var t=l(e.components);return r.a.createElement(c.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},d=Object(a.forwardRef)((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,p=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),b=l(n),d=a,f=b["".concat(p,".").concat(d)]||b[d]||u[d]||i;return n?r.a.createElement(f,o({ref:t},c,{components:n})):r.a.createElement(f,o({ref:t},c))}));function f(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,p=new Array(i);p[0]=d;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:a,p[1]=o;for(var c=2;c<i;c++)p[c]=n[c];return r.a.createElement.apply(null,p)}return r.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"}}]);